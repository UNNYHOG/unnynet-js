!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.UnnyNet=t():e.UnnyNet=t()}(window,(function(){return function(e){var t=window.webpackHotUpdateUnnyNet;window.webpackHotUpdateUnnyNet=function(e,n){!function(e,t){if(g[e]&&w[e]){for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--v&&0===y&&k()}}(e,n),t&&t(e,n)};var n,a=!0,o="c7f525e6411f7862e44d",i=1e4,r={},u=[],l=[];function d(e){var t=I[e];if(!t)return S;function a(a){return t.hot.active?(I[a]?-1===I[a].parents.indexOf(e)&&I[a].parents.push(e):(u=[e],n=a),-1===t.children.indexOf(a)&&t.children.push(a)):(console.warn("[HMR] unexpected require("+a+") from disposed module "+e),u=[]),S(a)}function o(e){return{configurable:!0,enumerable:!0,get:function(){return S[e]},set:function(t){S[e]=t}}}for(var i in S)Object.prototype.hasOwnProperty.call(S,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(a,i,o(i));return a.e=function(e){return"ready"===s&&f("prepare"),y++,S.e(e).then(t,(function(e){throw t(),e}));function t(){y--,"prepare"===s&&(b[e]||O(e),0===y&&0===v&&k())}},a.t=function(e,t){return 1&t&&(e=a(e)),S.t(e,-2&t)},a}var c=[],s="idle";function f(e){s=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,m,h,v=0,y=0,b={},w={},g={};function C(e){return+e+""===e?+e:e}function _(e){if("idle"!==s)throw new Error("check() is only allowed in idle status");return a=e,f("check"),function(e){return e=e||1e4,new Promise((function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var a=new XMLHttpRequest,i=S.p+""+o+".hot-update.json";a.open("GET",i,!0),a.timeout=e,a.send(null)}catch(e){return n(e)}a.onreadystatechange=function(){if(4===a.readyState)if(0===a.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===a.status)t();else if(200!==a.status&&304!==a.status)n(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(a.responseText)}catch(e){return void n(e)}t(e)}}}))}(i).then((function(e){if(!e)return f("idle"),null;w={},b={},g=e.c,h=e.h,f("prepare");var t=new Promise((function(e,t){p={resolve:e,reject:t}}));return m={},O(0),"prepare"===s&&0===y&&0===v&&k(),t}))}function O(e){g[e]?(w[e]=!0,v++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=S.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):b[e]=!0}function k(){f("ready");var e=p;if(p=null,e)if(a)Promise.resolve().then((function(){return R(a)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(C(n));e.resolve(t)}}function R(t){if("ready"!==s)throw new Error("apply() is only allowed in ready status");var n,a,i,l,d;function c(e){for(var t=[e],n={},a=t.map((function(e){return{chain:[e],id:e}}));0<a.length;){var o=a.pop(),i=o.id,r=o.chain;if((l=I[i])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:r,moduleId:i};if(l.hot._main)return{type:"unaccepted",chain:r,moduleId:i};for(var u=0;u<l.parents.length;u++){var d=l.parents[u],c=I[d];if(c){if(c.hot._declinedDependencies[i])return{type:"declined",chain:r.concat([d]),moduleId:i,parentId:d};-1===t.indexOf(d)&&(c.hot._acceptedDependencies[i]?(n[d]||(n[d]=[]),p(n[d],[i])):(delete n[d],t.push(d),a.push({chain:r.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];-1===e.indexOf(a)&&e.push(a)}}function v(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")}t=t||{};var y={},b=[],w={};for(var _ in m)if(Object.prototype.hasOwnProperty.call(m,_)){var O;d=C(_);var k=!1,R=!1,A=!1,P="";switch((O=m[_]?c(d):{type:"disposed",moduleId:_}).chain&&(P="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(k=new Error("Aborted because of self decline: "+O.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(k=new Error("Aborted because "+d+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(O),R=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),A=!0;break;default:throw new Error("Unexception type "+O.type)}if(k)return f("abort"),Promise.reject(k);if(R)for(d in w[d]=m[d],p(b,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,d)&&(y[d]||(y[d]=[]),p(y[d],O.outdatedDependencies[d]));A&&(p(b,[O.moduleId]),w[d]=v)}var G,E=[];for(a=0;a<b.length;a++)d=b[a],I[d]&&I[d].hot._selfAccepted&&w[d]!==v&&E.push({module:d,errorHandler:I[d].hot._selfAccepted});f("dispose"),Object.keys(g).forEach((function(e){!1===g[e]&&function(e){delete installedChunks[e]}(e)}));for(var N,T,M=b.slice();0<M.length;)if(d=M.pop(),l=I[d]){var j={},x=l.hot._disposeHandlers;for(i=0;i<x.length;i++)(n=x[i])(j);for(r[d]=j,l.hot.active=!1,delete I[d],delete y[d],i=0;i<l.children.length;i++){var D=I[l.children[i]];D&&0<=(G=D.parents.indexOf(d))&&D.parents.splice(G,1)}}for(d in y)if(Object.prototype.hasOwnProperty.call(y,d)&&(l=I[d]))for(T=y[d],i=0;i<T.length;i++)N=T[i],0<=(G=l.children.indexOf(N))&&l.children.splice(G,1);for(d in f("apply"),o=h,w)Object.prototype.hasOwnProperty.call(w,d)&&(e[d]=w[d]);var F=null;for(d in y)if(Object.prototype.hasOwnProperty.call(y,d)&&(l=I[d])){T=y[d];var L=[];for(a=0;a<T.length;a++)if(N=T[a],n=l.hot._acceptedDependencies[N]){if(-1!==L.indexOf(n))continue;L.push(n)}for(a=0;a<L.length;a++){n=L[a];try{n(T)}catch(n){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:d,dependencyId:T[a],error:n}),t.ignoreErrored||(F=F||n)}}}for(a=0;a<E.length;a++){var U=E[a];d=U.module,u=[d];try{S(d)}catch(a){if("function"==typeof U.errorHandler)try{U.errorHandler(a)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:d,error:n,originalError:a}),t.ignoreErrored||(F=F||n),F=F||a}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:d,error:a}),t.ignoreErrored||(F=F||a)}}return F?(f("fail"),Promise.reject(F)):(f("idle"),new Promise((function(e){e(b)})))}var I={};function S(t){if(I[t])return I[t].exports;var a=I[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var a=0;a<e.length;a++)t._acceptedDependencies[e[a]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);0<=n&&t._disposeHandlers.splice(n,1)},check:_,apply:R,status:function(e){if(!e)return s;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);0<=t&&c.splice(t,1)},data:r[e]};return n=void 0,t}(t),parents:(l=u,u=[],l),children:[]};return e[t].call(a.exports,a,a.exports,d(t)),a.l=!0,a.exports}return S.m=e,S.c=I,S.d=function(e,t,n){S.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.t=function(e,t){if(1&t&&(e=S(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(S.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)S.d(n,a,function(t){return e[t]}.bind(null,a));return n},S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,"a",t),t},S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},S.p="",S.h=function(){return o},d(6)(S.s=6)}([function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0});function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Errors={NotInitialized:-1,Unknown:1,NotAuthorized:2,NoMessage:3,NoChannel:4,UnnynetNotReady:5,NoGameId:6,NoSuchLeaderboard:7,NoLeaderboardsForTheGame:8,NoAchievementsForTheGame:9,NoGuildsForTheGame:10,NotInGuild:11,NoSuchAchievement:12,WrongAchievementType:13};var r=(function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(u,null,[{key:"GetCommand",value:function(e){return u.jsCommands[e]}},{key:"getResponceData",value:function(e){var t={};return e.error?(t.success=!1,t.error=JSON.parse(e.error)):t.success=!0,e.data&&(t.data=JSON.parse(e.data)),t}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}r.Command={OpenLeaderBoards:1,OpenAchievements:2,OpenFriends:3,OpenChannel:4,OpenGuilds:5,OpenMyGuild:6,SetSafeArea:7,SendMessage:20,ReportLeaderboardScores:40,ReportAchievementProgress:41,AddGuildExperience:60,RequestFailed:70,RequestSucceeded:71,RequestReply:72,SetKeyboardOffset:80,SetConfig:81,SetDefaultChannel:82,AuthorizeWithCredentials:100,AuthorizeAsGuest:101,AuthorizeWithCustomId:102,ForceLogout:110,GetGuildInfo:120,GetAchievementsInfo:130,GetPlayerPublicInfo:140,GetLeaderboardScores:150},r.jsCommands=(i(a={},r.Command.OpenLeaderBoards,"window.globalReactFunctions.apiOpenLeaderboards();"),i(a,r.Command.OpenAchievements,"window.globalReactFunctions.apiOpenAchievements();"),i(a,r.Command.OpenFriends,"window.globalReactFunctions.apiOpenFriends();"),i(a,r.Command.OpenChannel,"window.globalReactFunctions.apiOpenChannel('{0}');"),i(a,r.Command.OpenGuilds,"window.globalReactFunctions.apiOpenGuilds();"),i(a,r.Command.OpenMyGuild,"window.globalReactFunctions.apiOpenMyGuild();"),i(a,r.Command.SendMessage,"window.globalReactFunctions.apiSendMessage('{0}', '{1}');"),i(a,r.Command.ReportLeaderboardScores,"window.globalReactFunctions.apiReportLeaderboardScores('{0}', {1});"),i(a,r.Command.ReportAchievementProgress,"window.globalReactFunctions.apiReportAchievementProgress({0}, {1});"),i(a,r.Command.AddGuildExperience,"window.globalReactFunctions.apiAddGuildExperience('{0}');"),i(a,r.Command.RequestFailed,"window.globalReactFunctions.requestFailed('{0}', \"{1}\");"),i(a,r.Command.RequestSucceeded,"window.globalReactFunctions.requestSucceeded('{0}');"),i(a,r.Command.RequestReply,"window.globalReactFunctions.requestReply('{0}', '{1}');"),i(a,r.Command.SetKeyboardOffset,"window.globalReactFunctions.apiSetKeyboardOffset('{0}');"),i(a,r.Command.SetConfig,"window.globalReactFunctions.apiSetConfig('{0}');"),i(a,r.Command.SetDefaultChannel,"window.globalReactFunctions.apiSetDefaultChannel('{0}');"),i(a,r.Command.AuthorizeWithCredentials,"window.globalReactFunctions.apiAuthWithCredentials('{0}', '{1}', '{2}');"),i(a,r.Command.AuthorizeAsGuest,"window.globalReactFunctions.apiAuthAsGuest('{0}');"),i(a,r.Command.AuthorizeWithCustomId,"window.globalReactFunctions.apiAuthWithCustomId('{0}', '{1}');"),i(a,r.Command.ForceLogout,"window.globalReactFunctions.apiForceLogout();"),i(a,r.Command.GetGuildInfo,"window.globalReactFunctions.apiGetGuildInfo(<*id*>, {0});"),i(a,r.Command.SetSafeArea,"window.globalReactFunctions.apiSetSafeArea({0}, {1}, {2}, {3});"),i(a,r.Command.GetAchievementsInfo,"window.globalReactFunctions.apiGetAchievementsInfo(<*id*>);"),i(a,r.Command.GetPlayerPublicInfo,"window.globalReactFunctions.apiGetPlayerPublicInfo(<*id*>);"),i(a,r.Command.GetLeaderboardScores,"window.globalReactFunctions.apiGetLeaderboardScores(<*id*>, '{0}');"),a),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=l(n(7)),i=l(n(0)),r=n(4),u=l(r);function l(e){return e&&e.__esModule?e:{default:e}}var d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,o.default),function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(c,null,[{key:"initialize",value:function(e){new c(e)}},{key:"openLeaderboards",value:function(e){o.default.evaluateCommand(i.default.Command.OpenLeaderBoards,!0,e)}},{key:"openAchievements",value:function(e){o.default.evaluateCommand(i.default.Command.OpenAchievements,!0,e)}},{key:"openFriends",value:function(e){o.default.evaluateCommand(i.default.Command.OpenFriends,!0,e)}},{key:"openChannel",value:function(e,t){var n=i.default.GetCommand(i.default.Command.OpenChannel).format(e);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.OpenChannel,n,!0,t))}},{key:"openGuilds",value:function(e){o.default.evaluateCommand(i.default.Command.OpenGuilds,!0,e)}},{key:"openMyGuild",value:function(e){o.default.evaluateCommand(i.default.Command.OpenMyGuild,!0,e)}},{key:"authorizeWithCredentials",value:function(e,t,n,a){var r=i.default.GetCommand(i.default.Command.AuthorizeWithCredentials).format(e,t,n);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.AuthorizeWithCredentials,r,!1,a),!0)}},{key:"authorizeAsGuest",value:function(e,t){var n=i.default.GetCommand(i.default.Command.AuthorizeAsGuest).format(e);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.AuthorizeAsGuest,n,!1,t),!0)}},{key:"authorizeWithCustomId",value:function(e,t,n){var a=i.default.GetCommand(i.default.Command.AuthorizeWithCustomId).format(e,t);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.AuthorizeWithCustomId,a,!1,n),!0)}},{key:"forceLogout",value:function(e){o.default.evaluateCommand(i.default.Command.ForceLogout,!1,e)}},{key:"getGuildInfo",value:function(e,t){var n=i.default.GetCommand(i.default.Command.GetGuildInfo).format(e?1:0);o.default.evaluateCodeInJavaScript(new r.UnnyCommandInfoDelayed(i.default.Command.GetGuildInfo,n,t))}},{key:"getAchievementsInfo",value:function(e){var t=i.default.GetCommand(i.default.Command.GetAchievementsInfo);o.default.evaluateCodeInJavaScript(new r.UnnyCommandInfoDelayed(i.default.Command.GetAchievementsInfo,t,e))}},{key:"getPlayerPublicInfo",value:function(e){var t=i.default.GetCommand(i.default.Command.GetPlayerPublicInfo);o.default.evaluateCodeInJavaScript(new r.UnnyCommandInfoDelayed(i.default.Command.GetPlayerPublicInfo,t,e))}},{key:"getLeaderboardScores",value:function(e,t){var n=i.default.GetCommand(i.default.Command.GetLeaderboardScores).format(e);o.default.evaluateCodeInJavaScript(new r.UnnyCommandInfoDelayed(i.default.Command.GetLeaderboardScores,n,t))}},{key:"sendMessageToChannel",value:function(e,t,n){if(t){var a=i.default.GetCommand(i.default.Command.SendMessage).format(e,t);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.SendMessage,a,!1,n))}}},{key:"reportLeaderboards",value:function(e,t,n){var a=i.default.GetCommand(i.default.Command.ReportLeaderboardScores).format(e,t);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.ReportLeaderboardScores,a,!1,n))}},{key:"reportAchievements",value:function(e,t,n){var a=i.default.GetCommand(i.default.Command.ReportAchievementProgress).format(e,t);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.ReportAchievementProgress,a,!1,n))}},{key:"addGuildExperience",value:function(e,t){var n=i.default.GetCommand(i.default.Command.AddGuildExperience).format(e);o.default.evaluateCodeInJavaScript(new u.default(i.default.Command.AddGuildExperience,n,!1,t))}}]),c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GENERAL_CONSTANTS:{REMOTE_URL:"https://unnynet.com",VERSION:2,PLUGIN_VERSION:"2.8"},SEND_REQUEST_RETRY_DELAY:1,MAX_RETRIES:3,ANIMATIONS:{OPEN_DURATION:.5}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewOpenDirection=void 0;function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o,i=(o=n(2))&&o.__esModule?o:{default:o},r=t.ViewOpenDirection={NONE:0,LEFT_TO_RIGHT:2,RIGHT_TO_LEFT:4,TOP_TO_BOTTOM:1,BOTTOM_TO_TOP:3},u=(function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(l,[{key:"_receiveMessage",value:function(e){if(console.warn("new event11",e),e.origin===i.default.GENERAL_CONSTANTS.REMOTE_URL&&e.data)if(e.data.reply){var t=e.data.id;if(this.evaluationsById.hasOwnProperty(t)){var n=e.data.reply,a=this.evaluationsById[t].callback;delete this.evaluationsById[t],console.log("reply "+n),a(n)}}else if(console.error("NO REPLY"),e.data&&e.data.message&&e.data.message.split){var o=decodeURIComponent(e.data.message).split("?"),r=void 0,u={};if(0<o.length&&(r=o[0],1<o.length))for(var l=o[1].split("&"),d=0;d<l.length;d++){var c=l[d].split("=");1<c.length&&(u[c[0]]=c[1])}this.onMessageReceived&&this.onMessageReceived({path:r,args:u})}}},{key:"openUrl",value:function(e){this.iFrame.src=e}},{key:"setFrame",value:function(e){this.cachedFrame=e,this._isVisible()?this._applyNormalPosition():this._applyHiddenPosition()}},{key:"_applyNormalPosition",value:function(){var e=this.cachedFrame,t=this.parent.style;t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.width=e.width,t.height=e.height}},{key:"_applyHiddenPosition",value:function(){var e=this.parent.style;switch(this._applyNormalPosition(),this.config.open_animation){case r.LEFT_TO_RIGHT:e.left="-"+e.width,e.right=void 0;break;case r.RIGHT_TO_LEFT:e.left=void 0,e.right="-"+e.width;break;case r.TOP_TO_BOTTOM:e.top="-"+e.height,e.bottom=void 0;break;case r.BOTTOM_TO_TOP:e.top=void 0,e.bottom="-"+e.height}}},{key:"_isVisible",value:function(){return"visible"===this.parent.style.visibility}},{key:"_setAnimationActive",value:function(e){var t=this.parent.style;t["-webkit-transition"]=t.transition=e?"all "+i.default.ANIMATIONS.OPEN_DURATION+"s ease-in-out":void 0}},{key:"_clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"hide",value:function(){var e=this;this._clearTimer(),this._applyHiddenPosition(),this.timer=setTimeout((function(){e.parent.style.visibility="hidden",e.timer=null}),1e3*i.default.ANIMATIONS.OPEN_DURATION)}},{key:"show",value:function(){this._clearTimer(),this.parent.style.visibility="visible",this._applyNormalPosition()}},{key:"evaluateJavaScript",value:function(e,t){var n={eval_code:e,id:this.instanceId++};this.evaluationsById[n.id]={callback:t},this.window.postMessage(n,i.default.GENERAL_CONSTANTS.REMOTE_URL)}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("div");this.parent=document.body.appendChild(t);var n=document.createElement("iframe");this.iFrame=this.parent.appendChild(n),this.window=this.iFrame.contentWindow;var a=this.iFrame.style;a.position="absolute",a.left=a.right="0",a.top=a.bottom="0",a.width=a.height="100%",a.border="none";var o=this.parent.style;o.zIndex="999999",o.position="fixed",o.visibility="hidden",this.config=e,this.evaluationsById={},this.instanceId=0,this.onMessageReceived=null,e.open_animation&&this._setAnimationActive(!0),this.setFrame({left:"0",top:"0",width:"50%",height:"100%"}),window.addEventListener("message",this._receiveMessage.bind(this),!1)}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnnyCommandInfoDelayed=void 0;function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=r(n(0)),i=r(n(5));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=(function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(d,[{key:"shallOpenWindow",value:function(){return this.info.openWindow}},{key:"getCode",value:function(){return this.info.code}},{key:"setCode",value:function(e){this.info.code=e}},{key:"getCommand",value:function(){return this.info.command}},{key:"getRetries",value:function(){return this.info.retries}},{key:"invokeCallback",value:function(e){this.info.callback&&this.info.callback(e)}},{key:"invokeCallbackNative",value:function(e){this.info.callbackNative&&this.info.callbackNative(e)}},{key:"invokeCallbackDelayed",value:function(e){this.info.callbackDelayed&&this.info.callbackDelayed(o.default.getResponceData(e))}},{key:"needToSave",value:function(){switch(this.Command){case o.default.Command.SendMessage:case o.default.Command.ReportLeaderboardScores:case o.default.Command.ReportAchievementProgress:case o.default.Command.AddGuildExperience:return!0;default:return!1}}},{key:"couldBeReplaced",value:function(e){var t=this.getCommand();switch(e){case o.default.Command.OpenLeaderBoards:case o.default.Command.OpenAchievements:case o.default.Command.OpenFriends:case o.default.Command.OpenChannel:case o.default.Command.OpenGuilds:case o.default.Command.OpenMyGuild:return t===o.default.Command.OpenLeaderBoards||t===o.default.Command.OpenAchievements||t===o.default.Command.OpenFriends||t===o.default.Command.OpenChannel||t===o.default.Command.OpenGuilds||t===o.default.Command.OpenMyGuild;case o.default.Command.AuthorizeWithCredentials:case o.default.Command.AuthorizeAsGuest:case o.default.Command.AuthorizeWithCustomId:case o.default.Command.ForceLogout:case o.default.Command.GetGuildInfo:case o.default.Command.GetAchievementsInfo:case o.default.Command.GetPlayerPublicInfo:case o.default.Command.GetLeaderboardScores:case o.default.Command.GetAvatarURL:case o.default.Command.SetSafeArea:return t===e;default:return!1}}},{key:"_isOpenCommand",value:function(e){switch(e){case o.default.Command.OpenLeaderBoards:case o.default.Command.OpenAchievements:case o.default.Command.OpenFriends:case o.default.Command.OpenChannel:case o.default.Command.OpenGuilds:case o.default.Command.OpenMyGuild:return!0;default:return!1}}},{key:"sameType",value:function(e){var t=this.getCommand();return!(!this._isOpenCommand(e)||!this._isOpenCommand(t))||e===t}}]),d);function d(e,t,n,a){u(this,d),this.info={command:e,code:t,openWindow:n,callback:a},this.retries=0,this.startedTime=null}function c(e,t,n){u(this,c);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t,!1,null));return a.info.callbackDelayed=n,i.default.addRequest(a),a}t.default=l,t.UnnyCommandInfoDelayed=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l),c)},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(i,[{key:"_requestId",value:function(){return this.uniqueIds++}}],[{key:"getInstance",value:function(){return i.staticRequestsManagerInstance||(i.staticRequestsManagerInstance=new i),i.staticRequestsManagerInstance}},{key:"addRequest",value:function(e){var t=i.getInstance(),n=t._requestId();if((t.allRequests[n]=e).getCode()){var a=e.getCode().replace("<*id*>",n);e.setCode(a)}}},{key:"replyReceived",value:function(e){var t=i.getInstance(),n=e.id;t.allRequests.hasOwnProperty(n)&&(t.allRequests[n].invokeCallbackDelayed(e),delete t.allRequests[n])}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.uniqueIds=0,this.allRequests={}}o.staticRequestsManagerInstance=null,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(1)),o=n(10),i=l(o),r=n(3),u=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.default={UnnyNet:a.default,PopupButtons:i.default,ButtonType:o.ButtonType,ViewOpenDirection:r.ViewOpenDirection,Errors:u.Errors}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=f(n(8)),i=f(n(4)),r=n(0),u=f(r),l=f(n(2)),d=f(n(5)),c=f(n(9)),s=f(n(1));function f(e){return e&&e.__esModule?e:{default:e}}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n]:t}))});var p=(function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(m,[{key:"_receiveMessage",value:function(e){var t=e.path,n=e.args;switch(t){case"authorised":s.default.onPlayerAuthorized&&s.default.onPlayerAuthorized(n),this.config.default_channel&&this._setDefaultChannel(this.config.default_channel);break;case"logged_out":s.default.onPlayerLoggedOut&&s.default.onPlayerLoggedOut();break;case"renamed":s.default.onPlayerNameChanged&&s.default.onPlayerNameChanged(n.name);break;case"rank_changed":s.default.onRankChanged&&s.default.onRankChanged(n);break;case"new_guild":null!=s.default.onNewGuild&&s.default.onNewGuild(n);break;case"ask_new_guild":case"popup_appeared":c.default.create(t,n,this._sendRequestReply);break;case"popup_button_clicked":c.default.buttonClicked(n);break;case"ach_completed":null!=s.default.onAchievementCompleted&&s.default.onAchievementCompleted(n);break;case"new_message":null!=s.default.onNewMessageReceived&&s.default.onNewMessageReceived(n);break;case"game_login_request":null!=s.default.onGameLoginRequest&&s.default.onGameLoginRequest();break;case"request_reply":d.default.replyReceived(n);break;case"open_url":n.url&&window.open(n.url,"_blank")}}},{key:"_setDefaultChannel",value:function(e){var t=u.default.GetCommand(u.default.Command.SetDefaultChannel).format(e);m.evaluateCodeInJavaScript(new i.default(u.default.Command.SetDefaultChannel,t,!1))}},{key:"_sendRequestReply",value:function(e,t){var n=u.default.GetCommand(u.default.Command.RequestReply).format(e,t);m.evaluateCodeInJavaScript(new i.default(u.default.Command.RequestReply,n,!1))}},{key:"_update",value:function(){this._checkQueue()}},{key:"_checkQueue",value:function(){var e=this;if(0!==this.queue.length&&m._сheckWebView()){var t=this.queue[0];if(null==t.startedTime)t.startedTime=Date.now();else{var n=Date.now();if(!(n-t.startedTime>l.default.SEND_REQUEST_RETRY_DELAY))return;t.StartedTime=n,t.retries++,t.getRetries()>l.default.MAX_RETRIES&&console.error("Max retries: "+t.Command.toString())}try{this.webView.evaluateJavaScript(t.getCode(),(function(n){var a=!1;if(n.success)a=!0,t.info.openWindow&&m.openUnnyNet();else if(n.error)switch(n.error.code){case r.Errors.UnnynetNotReady:case r.Errors.NotAuthorized:console.log("Waiting..."+n.error.message);break;default:a=!0}a&&(e.queue.shift(),null!=t&&t.invokeCallback(n))}))}catch(n){console.error("EVAL ERROR: ",n)}}}},{key:"hideWebView",value:function(){null!=s.default.onUnnyNetClosed&&s.default.onUnnyNetClosed(),this.webView.hide(this.config)}},{key:"showWebView",value:function(){this.webView.show(this.config)}}],[{key:"_сheckWebView",value:function(){return!!m.staticUnnyNetInstance||(console.error("UnnyNet wasn't properly initialized"),!1)}},{key:"evaluateCommand",value:function(e,t,n){console.log(">>openWindow "+t),m.evaluateCodeInJavaScript(new i.default(e,u.default.GetCommand(e),t,n))}},{key:"evaluateCodeInJavaScript",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(console.info("><><",e),m._сheckWebView()){for(var a=m.staticUnnyNetInstance.queue,o=-1,i=1;i<a.length;i++)if(a[i].couldBeReplaced(e.Command)){o=i;break}-1===o?(n?a.unshift(e):a.push(e),1===a.length&&m.staticUnnyNetInstance._checkQueue()):a[o]=e}}},{key:"openUnnyNet",value:function(){m._сheckWebView()&&m.staticUnnyNetInstance.showWebView()}},{key:"closeUnnyNet",value:function(){null!=m.staticUnnyNetInstance&&m.staticUnnyNetInstance.hideWebView()}},{key:"setFrame",value:function(e){m.staticUnnyNetInstance.webView.setFrame(e)}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.config=e,this.webView=new o.default(e),this.queue=[],m.staticUnnyNetInstance=this,e.game_id||(e.game_id="8ff16d3c-ebcc-4582-a734-77ca6c14af29"),this.webView.openGameUrl(e.game_id,e.public_key,!!s.default.onGameLoginRequest),this.webView.onMessageReceived=this._receiveMessage.bind(this),setInterval(this._update.bind(this),1e3)}p.staticUnnyNetInstance=null,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=u(n(3)),i=u(n(2)),r=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,o.default),function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(d,[{key:"openGameUrl",value:function(e,t,n){var a=i.default.GENERAL_CONSTANTS.REMOTE_URL+"/#/plugin/"+e+"?version="+i.default.GENERAL_CONSTANTS.VERSION+"&public_key="+t;n&&(a+="&game_login=1"),a+="&location_origin="+window.location.origin;var o=localStorage.getItem("js_device_id");o||(o=function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}(),localStorage.setItem("js_device_id",o)),a+="&device_id="+o,this.openUrl(a)}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e)),n=document.createElement("button");t.closeBtn=t.parent.appendChild(n);var a=t.closeBtn.style;return a.position="absolute",a.top=a.right="7px",a.outline="none",a.background="none",a.border="none",t.closeBtn.innerHTML='<img src="https://unnynet.azureedge.net/users/attachments/b246adbe-c1af-4532-88ca-f1d1709b0211/09b47e40-e61b-11e9-b83d-a5adea23c281.png" />',t.closeBtn.onclick=r.default.closeUnnyNet,t}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o,i=n(0),r=(o=n(1))&&o.__esModule?o:{default:o},u=(function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(l,null,[{key:"create",value:function(e,t,n){switch(e){case"ask_new_guild":l._askNewGuildRequest(t,n);break;case"popup_appeared":l._playerPopupAppearedRequest(t,n)}}},{key:"sendFailed",value:function(e,t,n,a){var o=2<arguments.length&&void 0!==n?n:"";t(e,'{"success": 0, "error": {"code":'+(3<arguments.length&&void 0!==a?a:i.Errors.Unknown)+', "message": "'+o+'"}}')}},{key:"sendSuccess",value:function(e,t){t(e,'{"success": 1}')}},{key:"sendSuccessWithData",value:function(e,t,n){n(e,'{"success": 1, "data":'+t+"}")}},{key:"_askNewGuildRequest",value:function(e,t){var n=e.sys_id,a=null;r.default.onNewGuildRequest&&(a=r.default.onNewGuildRequest(e)),a?l.sendFailed(n,t,a):l.sendSuccess(n,t)}},{key:"_playerPopupAppearedRequest",value:function(e,t){var n=e.sys_id;if(null!=r.default.onPopupOpened){var a=r.default.onPopupOpened(e);if(null!=a)return void l.sendSuccessWithData(n,a.parse(),t)}l.sendSuccess(n,t)}},{key:"buttonClicked",value:function(e){if(PopupButtons.activePopup){var t=e.button_id;if(t){var n=parseInt(t);PopupButtons.activePopup.buttonClicked(n)}}}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l)}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=t.ButtonType={Primary:"Primary",Secondary:"Secondary",Success:"Success",Info:"Info",Warning:"Warning",Danger:"Danger"},i=(function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(r,[{key:"addButton",value:function(e,t,n){var a=2<arguments.length&&void 0!==n?n:o.Primary;this.allButtons.push({id:r._buttonInstance++,title:e,type:a}),this.allButtonsAction.push(t)}},{key:"parse",value:function(){var e=JSON.stringify(this.allButtons);return console.log("> "+e),'{"buttons": '+e+"}"}},{key:"buttonClicked",value:function(e){for(var t=0;t<this.allButtons.length;t++)if(this.allButtons[t].id===e){var n=this.allButtonsAction[t];n&&n();break}}}]),r);function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(r.activePopup=this).allButtons=[],this.allButtonsAction=[]}i._buttonInstance=0,t.default=i}]).default}));