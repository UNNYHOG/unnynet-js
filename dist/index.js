!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.UnnyNet=n():e.UnnyNet=n()}(window,(function(){return function(e){var n=window.webpackHotUpdateUnnyNet;window.webpackHotUpdateUnnyNet=function(e,t){!function(e,n){if(w[e]&&b[e]){for(var t in b[e]=!1,n)Object.prototype.hasOwnProperty.call(n,t)&&(p[t]=n[t]);0==--v&&0===y&&k()}}(e,t),n&&n(e,t)};var t,a=!0,o="60545dbcfc5033a12a40",r=1e4,i={},d=[],u=[];function l(e){var n=S[e];if(!n)return A;function a(a){return n.hot.active?(S[a]?-1===S[a].parents.indexOf(e)&&S[a].parents.push(e):(d=[e],t=a),-1===n.children.indexOf(a)&&n.children.push(a)):(console.warn("[HMR] unexpected require("+a+") from disposed module "+e),d=[]),A(a)}function o(e){return{configurable:!0,enumerable:!0,get:function(){return A[e]},set:function(n){A[e]=n}}}for(var r in A)Object.prototype.hasOwnProperty.call(A,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(a,r,o(r));return a.e=function(e){return"ready"===s&&f("prepare"),y++,A.e(e).then(n,(function(e){throw n(),e}));function n(){y--,"prepare"===s&&(C[e]||O(e),0===y&&0===v&&k())}},a.t=function(e,n){return 1&n&&(e=a(e)),A.t(e,-2&n)},a}var c=[],s="idle";function f(e){s=e;for(var n=0;n<c.length;n++)c[n].call(null,e)}var m,p,h,v=0,y=0,C={},b={},w={};function _(e){return+e+""===e?+e:e}function g(e){if("idle"!==s)throw new Error("check() is only allowed in idle status");return a=e,f("check"),function(e){return e=e||1e4,new Promise((function(n,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var a=new XMLHttpRequest,r=A.p+""+o+".hot-update.json";a.open("GET",r,!0),a.timeout=e,a.send(null)}catch(e){return t(e)}a.onreadystatechange=function(){if(4===a.readyState)if(0===a.status)t(new Error("Manifest request to "+r+" timed out."));else if(404===a.status)n();else if(200!==a.status&&304!==a.status)t(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(a.responseText)}catch(e){return void t(e)}n(e)}}}))}(r).then((function(e){if(!e)return f("idle"),null;b={},C={},w=e.c,h=e.h,f("prepare");var n=new Promise((function(e,n){m={resolve:e,reject:n}}));return p={},O(0),"prepare"===s&&0===y&&0===v&&k(),n}))}function O(e){w[e]?(b[e]=!0,v++,function(e){var n=document.createElement("script");n.charset="utf-8",n.src=A.p+""+e+"."+o+".hot-update.js",document.head.appendChild(n)}(e)):C[e]=!0}function k(){f("ready");var e=m;if(m=null,e)if(a)Promise.resolve().then((function(){return R(a)})).then((function(n){e.resolve(n)}),(function(n){e.reject(n)}));else{var n=[];for(var t in p)Object.prototype.hasOwnProperty.call(p,t)&&n.push(_(t));e.resolve(n)}}function R(n){if("ready"!==s)throw new Error("apply() is only allowed in ready status");var t,a,r,u,l;function c(e){for(var n=[e],t={},a=n.map((function(e){return{chain:[e],id:e}}));0<a.length;){var o=a.pop(),r=o.id,i=o.chain;if((u=S[r])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:r};if(u.hot._main)return{type:"unaccepted",chain:i,moduleId:r};for(var d=0;d<u.parents.length;d++){var l=u.parents[d],c=S[l];if(c){if(c.hot._declinedDependencies[r])return{type:"declined",chain:i.concat([l]),moduleId:r,parentId:l};-1===n.indexOf(l)&&(c.hot._acceptedDependencies[r]?(t[l]||(t[l]=[]),m(t[l],[r])):(delete t[l],n.push(l),a.push({chain:i.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}function m(e,n){for(var t=0;t<n.length;t++){var a=n[t];-1===e.indexOf(a)&&e.push(a)}}function v(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")}n=n||{};var y={},C=[],b={};for(var g in p)if(Object.prototype.hasOwnProperty.call(p,g)){var O;l=_(g);var k=!1,R=!1,G=!1,I="";switch((O=p[g]?c(l):{type:"disposed",moduleId:g}).chain&&(I="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":n.onDeclined&&n.onDeclined(O),n.ignoreDeclined||(k=new Error("Aborted because of self decline: "+O.moduleId+I));break;case"declined":n.onDeclined&&n.onDeclined(O),n.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+I));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(O),n.ignoreUnaccepted||(k=new Error("Aborted because "+l+" is not accepted"+I));break;case"accepted":n.onAccepted&&n.onAccepted(O),R=!0;break;case"disposed":n.onDisposed&&n.onDisposed(O),G=!0;break;default:throw new Error("Unexception type "+O.type)}if(k)return f("abort"),Promise.reject(k);if(R)for(l in b[l]=p[l],m(C,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,l)&&(y[l]||(y[l]=[]),m(y[l],O.outdatedDependencies[l]));G&&(m(C,[O.moduleId]),b[l]=v)}var N,E=[];for(a=0;a<C.length;a++)l=C[a],S[l]&&S[l].hot._selfAccepted&&b[l]!==v&&E.push({module:l,errorHandler:S[l].hot._selfAccepted});f("dispose"),Object.keys(w).forEach((function(e){!1===w[e]&&function(e){delete installedChunks[e]}(e)}));for(var P,T,F=C.slice();0<F.length;)if(l=F.pop(),u=S[l]){var M={},j=u.hot._disposeHandlers;for(r=0;r<j.length;r++)(t=j[r])(M);for(i[l]=M,u.hot.active=!1,delete S[l],delete y[l],r=0;r<u.children.length;r++){var L=S[u.children[r]];L&&0<=(N=L.parents.indexOf(l))&&L.parents.splice(N,1)}}for(l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&(u=S[l]))for(T=y[l],r=0;r<T.length;r++)P=T[r],0<=(N=u.children.indexOf(P))&&u.children.splice(N,1);for(l in f("apply"),o=h,b)Object.prototype.hasOwnProperty.call(b,l)&&(e[l]=b[l]);var D=null;for(l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&(u=S[l])){T=y[l];var U=[];for(a=0;a<T.length;a++)if(P=T[a],t=u.hot._acceptedDependencies[P]){if(-1!==U.indexOf(t))continue;U.push(t)}for(a=0;a<U.length;a++){t=U[a];try{t(T)}catch(t){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:l,dependencyId:T[a],error:t}),n.ignoreErrored||(D=D||t)}}}for(a=0;a<E.length;a++){var x=E[a];l=x.module,d=[l];try{A(l)}catch(a){if("function"==typeof x.errorHandler)try{x.errorHandler(a)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:t,originalError:a}),n.ignoreErrored||(D=D||t),D=D||a}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:l,error:a}),n.ignoreErrored||(D=D||a)}}return D?(f("fail"),Promise.reject(D)):(f("idle"),new Promise((function(e){e(C)})))}var S={};function A(n){if(S[n])return S[n].exports;var a=S[n]={i:n,l:!1,exports:{},hot:function(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==e,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var a=0;a<e.length;a++)n._acceptedDependencies[e[a]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);0<=t&&n._disposeHandlers.splice(t,1)},check:g,apply:R,status:function(e){if(!e)return s;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var n=c.indexOf(e);0<=n&&c.splice(n,1)},data:i[e]};return t=void 0,n}(n),parents:(u=d,d=[],u),children:[]};return e[n].call(a.exports,a,a.exports,l(n)),a.l=!0,a.exports}return A.m=e,A.c=S,A.d=function(e,n,t){A.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},A.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},A.t=function(e,n){if(1&n&&(e=A(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(A.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)A.d(t,a,function(n){return e[n]}.bind(null,a));return t},A.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return A.d(n,"a",n),n},A.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},A.p="",A.h=function(){return o},l(3)(A.s=3)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={GENERAL_CONSTANTS:{REMOTE_URL:"https://unnynet.com",VERSION:2,PLUGIN_VERSION:"2.8"},ERRORS:{NotInitialized:-1,Unknown:1,NotAuthorized:2,NoMessage:3,NoChannel:4,UnnynetNotReady:5,NoGameId:6,NoSuchLeaderboard:7,NoLeaderboardsForTheGame:8,NoAchievementsForTheGame:9,NoGuildsForTheGame:10,NotInGuild:11,NoSuchAchievement:12,WrongAchievementType:13},SEND_REQUEST_RETRY_DELAY:1,MAX_RETRIES:3,ANIMATIONS:{OPEN_DURATION:.5}}},function(e,n,t){"use strict";var a;function o(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,n,t){t&&o(e,t)}(d,0,[{key:"GetCommand",value:function(e){return d.jsCommands[e]}},{key:"getResponceData",value:function(e,n,t,a){var o={success:e};return n&&(o.data=n),e||(o.error={code:t,message:a}),o}}]),d);function d(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,d)}i.Errors={NotInitialized:-1,Unknown:1,NotAuthorized:2,NoMessage:3,NoChannel:4,UnnynetNotReady:5,NoGameId:6,NoSuchLeaderboard:7,NoLeaderboardsForTheGame:8,NoAchievementsForTheGame:9,NoGuildsForTheGame:10,NotInGuild:11,NoSuchAchievement:12,WrongAchievementType:13},i.Command={OpenLeaderBoards:1,OpenAchievements:2,OpenFriends:3,OpenChannel:4,OpenGuilds:5,OpenMyGuild:6,SetSafeArea:7,SendMessage:20,ReportLeaderboardScores:40,ReportAchievementProgress:41,AddGuildExperience:60,RequestFailed:70,RequestSucceeded:71,SetKeyboardOffset:80,SetConfig:81,SetDefaultChannel:82,AuthorizeWithCredentials:100,AuthorizeAsGuest:101,AuthorizeWithCustomId:102,ForceLogout:110,GetGuildInfo:120,GetAchievementsInfo:130,GetPlayerPublicInfo:140,GetLeaderboardScores:150},i.jsCommands=(r(a={},i.Command.OpenLeaderBoards,"window.globalReactFunctions.apiOpenLeaderboards();"),r(a,i.Command.OpenAchievements,"window.globalReactFunctions.apiOpenAchievements();"),r(a,i.Command.OpenFriends,"window.globalReactFunctions.apiOpenFriends();"),r(a,i.Command.OpenChannel,"window.globalReactFunctions.apiOpenChannel('{0}');"),r(a,i.Command.OpenGuilds,"window.globalReactFunctions.apiOpenGuilds();"),r(a,i.Command.OpenMyGuild,"window.globalReactFunctions.apiOpenMyGuild();"),r(a,i.Command.SendMessage,"window.globalReactFunctions.apiSendMessage('{0}', '{1}');"),r(a,i.Command.ReportLeaderboardScores,"window.globalReactFunctions.apiReportLeaderboardScores('{0}', {1});"),r(a,i.Command.ReportAchievementProgress,"window.globalReactFunctions.apiReportAchievementProgress({0}, {1});"),r(a,i.Command.AddGuildExperience,"window.globalReactFunctions.apiAddGuildExperience('{0}');"),r(a,i.Command.RequestFailed,"window.globalReactFunctions.requestFailed('{0}', \"{1}\");"),r(a,i.Command.RequestSucceeded,"window.globalReactFunctions.requestSucceeded('{0}');"),r(a,i.Command.SetKeyboardOffset,"window.globalReactFunctions.apiSetKeyboardOffset('{0}');"),r(a,i.Command.SetConfig,"window.globalReactFunctions.apiSetConfig('{0}');"),r(a,i.Command.SetDefaultChannel,"window.globalReactFunctions.apiSetDefaultChannel('{0}');"),r(a,i.Command.AuthorizeWithCredentials,"window.globalReactFunctions.apiAuthWithCredentials('{0}', '{1}', '{2}');"),r(a,i.Command.AuthorizeAsGuest,"window.globalReactFunctions.apiAuthAsGuest('{0}');"),r(a,i.Command.AuthorizeWithCustomId,"window.globalReactFunctions.apiAuthWithCustomId('{0}', '{1}');"),r(a,i.Command.ForceLogout,"window.globalReactFunctions.apiForceLogout();"),r(a,i.Command.GetGuildInfo,"window.globalReactFunctions.apiGetGuildInfo(<*id*>, {0});"),r(a,i.Command.SetSafeArea,"window.globalReactFunctions.apiSetSafeArea({0}, {1}, {2}, {3});"),r(a,i.Command.GetAchievementsInfo,"window.globalReactFunctions.apiGetAchievementsInfo(<*id*>);"),r(a,i.Command.GetPlayerPublicInfo,"window.globalReactFunctions.apiGetPlayerPublicInfo(<*id*>);"),r(a,i.Command.GetLeaderboardScores,"window.globalReactFunctions.apiGetLeaderboardScores(<*id*>, '{0}');"),a),n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o,r=(o=t(1))&&o.__esModule?o:{default:o},i=(function(e,n,t){n&&a(e.prototype,n),t&&a(e,t)}(d,[{key:"shallOpenWindow",value:function(){return this.info.openWindow}},{key:"getCode",value:function(){return this.info.code}},{key:"setCode",value:function(e){this.info.code=e}},{key:"getCommand",value:function(){return this.info.command}},{key:"getRetries",value:function(){return this.info.retries}},{key:"invokeCallback",value:function(e){this.info.callback&&this.info.callback(e)}},{key:"invokeCallbackNative",value:function(e){this.info.callbackNative&&this.info.callbackNative(e)}},{key:"invokeCallbackDelayed",value:function(e){this.info.callbackDelayed&&this.info.callbackDelayed(r.default.getResponceData(!0,e))}},{key:"needToSave",value:function(){switch(this.Command){case r.default.Command.SendMessage:case r.default.Command.ReportLeaderboardScores:case r.default.Command.ReportAchievementProgress:case r.default.Command.AddGuildExperience:return!0;default:return!1}}},{key:"couldBeReplaced",value:function(e){var n=this.getCommand();switch(e){case r.default.Command.OpenLeaderBoards:case r.default.Command.OpenAchievements:case r.default.Command.OpenFriends:case r.default.Command.OpenChannel:case r.default.Command.OpenGuilds:case r.default.Command.OpenMyGuild:return n===r.default.Command.OpenLeaderBoards||n===r.default.Command.OpenAchievements||n===r.default.Command.OpenFriends||n===r.default.Command.OpenChannel||n===r.default.Command.OpenGuilds||n===r.default.Command.OpenMyGuild;case r.default.Command.AuthorizeWithCredentials:case r.default.Command.AuthorizeAsGuest:case r.default.Command.AuthorizeWithCustomId:case r.default.Command.ForceLogout:case r.default.Command.GetGuildInfo:case r.default.Command.GetAchievementsInfo:case r.default.Command.GetPlayerPublicInfo:case r.default.Command.GetLeaderboardScores:case r.default.Command.GetAvatarURL:case r.default.Command.SetSafeArea:return n===e;default:return!1}}},{key:"_isOpenCommand",value:function(e){switch(e){case r.default.Command.OpenLeaderBoards:case r.default.Command.OpenAchievements:case r.default.Command.OpenFriends:case r.default.Command.OpenChannel:case r.default.Command.OpenGuilds:case r.default.Command.OpenMyGuild:return!0;default:return!1}}},{key:"sameType",value:function(e){var n=this.getCommand();return!(!this._isOpenCommand(e)||!this._isOpenCommand(n))||e===n}}]),d);function d(e,n,t,a){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,d),this.info={command:e,code:n,openWindow:t,callback:a},this.retries=0,this.startedTime=null}n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(4);n.default=a.UnnyNet},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UnnyNet=void 0;function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=d(t(5)),r=d(t(1)),i=d(t(2));function d(e){return e&&e.__esModule?e:{default:e}}function u(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}n.UnnyNet=(function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(u,o.default),function(e,n,t){n&&a(e.prototype,n),t&&a(e,t)}(u,null,[{key:"initialize",value:function(e){new u(e)}},{key:"openLeaderboards",value:function(e){o.default.evaluateCommand(r.default.Command.OpenLeaderBoards,!0,e)}},{key:"openAchievements",value:function(e){o.default.evaluateCommand(r.default.Command.OpenAchievements,!0,e)}},{key:"openFriends",value:function(e){o.default.evaluateCommand(r.default.Command.OpenFriends,!0,e)}},{key:"openChannel",value:function(e,n){var t=r.default.GetCommand(r.default.Command.OpenChannel).format(e);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.OpenChannel,t,!0,n))}},{key:"openGuilds",value:function(e){o.default.evaluateCommand(r.default.Command.OpenGuilds,!0,e)}},{key:"openMyGuild",value:function(e){o.default.evaluateCommand(r.default.Command.OpenMyGuild,!0,e)}},{key:"authorizeWithCredentials",value:function(e,n,t,a){var d=r.default.GetCommand(r.default.Command.AuthorizeWithCredentials).format(e,n,t);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.AuthorizeWithCredentials,d,!1,a),!0)}},{key:"authorizeAsGuest",value:function(e,n){var t=r.default.GetCommand(r.default.Command.AuthorizeAsGuest).format(e);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.AuthorizeAsGuest,t,!1,n),!0)}},{key:"authorizeWithCustomId",value:function(e,n,t){var a=r.default.GetCommand(r.default.Command.AuthorizeWithCustomId).format(e,n);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.AuthorizeWithCustomId,a,!1,t),!0)}},{key:"forceLogout",value:function(e){o.default.evaluateCommand(r.default.Command.ForceLogout,!1,e)}},{key:"getGuildInfo",value:function(e,n){var t=r.default.GetCommand(r.default.Command.GetGuildInfo).format(e?1:0);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.GetGuildInfo,t,n))}},{key:"getAchievementsInfo",value:function(e){var n=r.default.GetCommand(r.default.Command.GetAchievementsInfo);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.GetAchievementsInfo,n,e))}},{key:"getPlayerPublicInfo",value:function(e){var n=r.default.GetCommand(r.default.Command.GetPlayerPublicInfo);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.GetPlayerPublicInfo,n,e))}},{key:"getLeaderboardScores",value:function(e,n){var t=r.default.GetCommand(r.default.Command.GetLeaderboardScores).format(e);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.GetLeaderboardScores,t,n))}},{key:"sendMessageToChannel",value:function(e,n,t){if(n){var a=r.default.GetCommand(r.default.Command.SendMessage).format(e,n);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.SendMessage,a,!1,t))}}},{key:"reportLeaderboards",value:function(e,n,t){var a=r.default.GetCommand(r.default.Command.ReportLeaderboardScores).format(e,n);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.ReportLeaderboardScores,a,!1,t))}},{key:"reportAchievements",value:function(e,n,t){var a=r.default.GetCommand(r.default.Command.ReportAchievementProgress).format(e,n);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.ReportAchievementProgress,a,!1,t))}},{key:"addGuildExperience",value:function(e,n){var t=r.default.GetCommand(r.default.Command.AddGuildExperience).format(e);o.default.evaluateCodeInJavaScript(new i.default(r.default.Command.AddGuildExperience,t,!1,n))}}]),u)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=u(t(6)),r=u(t(2)),i=u(t(1)),d=u(t(0));function u(e){return e&&e.__esModule?e:{default:e}}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(n,t){return void 0!==e[t]?e[t]:n}))});var l=(function(e,n,t){n&&a(e.prototype,n),t&&a(e,t)}(c,[{key:"_receiveMessage",value:function(e){if(console.warn("new event",e),e.origin===d.default.GENERAL_CONSTANTS.REMOTE_URL&&e.data){var n=e.data.path;if(!n)return;var t={};switch(n){case"authorised":c.onPlayerAuthorized&&c.onPlayerAuthorized(message.Args),this.config.default_channel&&this._setDefaultChannel(this.config.default_channel);break;case"logged_out":c.onPlayerLoggedOut&&c.onPlayerLoggedOut();break;case"renamed":c.onPlayerNameChanged&&c.onPlayerNameChanged(t.name);break;case"rank_changed":c.onRankChanged&&c.onRankChanged(t);break;case"new_guild":null!=c.onNewGuild&&c.onNewGuild(t);break;case"ach_completed":null!=c.onAchievementCompleted&&c.onAchievementCompleted(t);break;case"new_message":null!=c.onNewMessageReceived&&c.onNewMessageReceived(t);break;case"game_login_request":null!=c.onGameLoginRequest&&c.onGameLoginRequest();break;case"open_url":t.url&&window.open(t.url,"_blank")}}}},{key:"_setDefaultChannel",value:function(e){var n=i.default.GetCommand(i.default.Command.SetDefaultChannel).format(e);c.evaluateCodeInJavaScript(new r.default(i.default.Command.SetDefaultChannel,n,!1))}},{key:"_sendRequestFailed",value:function(e,n){var t=i.default.GetCommand(i.default.Command.RequestFailed).format(e,n);c.evaluateCodeInJavaScript(new r.default(i.default.Command.RequestFailed,t,!1))}},{key:"_SendRequestSucceeded",value:function(e){var n=i.default.GetCommand(i.default.Command.RequestSucceeded).format(e);c.evaluateCodeInJavaScript(new r.default(i.default.Command.RequestSucceeded,n,!1))}},{key:"_update",value:function(){this._checkQueue()}},{key:"_checkQueue",value:function(){if(0!==this.queue.length&&c._сheckWebView()){var e=this.queue[0];if(null==e.startedTime)e.startedTime=Date.now();else{var n=Date.now();if(!(n-e.startedTime>d.default.SEND_REQUEST_RETRY_DELAY))return;e.StartedTime=n,e.retries++,e.getRetries()>d.default.MAX_RETRIES&&console.error("Max retries: "+e.Command.toString())}try{var t=this.webView.evaluateJavaScript(e.getCode()),a=!1;console.log("payload "+t+" <> "+e.getCode()),"0"==t?(null!=e&&e.invokeCallback(i.default.getResponceData(!0)),a=!0):t&&(e.invokeCallback(t),a=t.success),a&&(this.queue.unshift(),e.openWindow&&c.openUnnyNet())}catch(e){console.error("EVAL ERROR: ",e)}}}},{key:"hideWebView",value:function(){null!=c.onUnnyNetClosed&&c.onUnnyNetClosed(),this.webView.hide(this.config)}},{key:"showWebView",value:function(){this.webView.show(this.config)}},{key:"setFrame",value:function(e){this.webView.setFrame(e)}}],[{key:"_сheckWebView",value:function(){return!!c.staticUnnyNetInstance||(console.error("UnnyNet wasn't properly initialized"),!1)}},{key:"evaluateCommand",value:function(e,n,t){c.evaluateCodeInJavaScript(new r.default({openWindow:n,code:i.default.GetCommand(e),command:e,callback:t}))}},{key:"evaluateCodeInJavaScript",value:function(e,n){var t=1<arguments.length&&void 0!==n&&n;if(c._сheckWebView()){for(var a=c.staticUnnyNetInstance.queue,o=-1,r=1;r<a.count;r++)if(a[r].couldBeReplaced(e.Command)){o=r;break}-1===o?t?a.unshift(e):a.push(e):a[o]=e}}},{key:"openUnnyNet",value:function(){c._сheckWebView()&&c.staticUnnyNetInstance.showWebView()}},{key:"closeUnnyNet",value:function(){null!=c.staticUnnyNetInstance&&c.staticUnnyNetInstance.hideWebView()}}]),c);function c(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,c),this.config=e,this.webView=new o.default,this.queue=[],this.open_fade=e.open_fade,this.open_animation=e.open_animation,c.staticUnnyNetInstance=this,e.game_id||(e.game_id="8ff16d3c-ebcc-4582-a734-77ca6c14af29"),this.webView.openGameUrl(e.game_id,e.public_key),window.addEventListener("message",this._receiveMessage.bind(this),!1),setInterval(this._update.bind(this),1e3)}l.staticUnnyNetInstance=null,n.default=l},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=i(t(7)),r=i(t(0));function i(e){return e&&e.__esModule?e:{default:e}}var d=(function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(u,o.default),function(e,n,t){n&&a(e.prototype,n),t&&a(e,t)}(u,[{key:"openGameUrl",value:function(e,n,t){var a=r.default.GENERAL_CONSTANTS.REMOTE_URL+"/#/plugin/"+e+"?version="+r.default.GENERAL_CONSTANTS.VERSION+"&public_key="+n;t&&(a+="&game_login=1"),a+="&location_origin="+window.location.origin,this.iFrame.src=a}}]),u);function u(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this))}n.default=d},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnnyViewOpenDirection=void 0;var _createClass=function(e,n,t){return n&&vh(e.prototype,n),t&&vh(e,t),e};function vh(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var _Constants=__webpack_require__(0),_Constants2=_interopRequireDefault(_Constants);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var UnnyViewOpenDirection=exports.UnnyViewOpenDirection={NONE:0,LEFT_TO_RIGHT:1,RIGHT_TO_LEFT:2,TOP_TO_BOTTOM:3,BOTTOM_TO_TOP:4},WebView=function(){function WebView(){_classCallCheck(this,WebView);var iFrame=document.createElement("iframe");this.iFrame=document.body.appendChild(iFrame),this.window=this.iFrame.contentWindow;var style=this.iFrame.style;style.zIndex=999999,style.position="fixed",style.visibility="hidden",style.left="-40%",style.top="0",style.right="0",style.width="50%",style.height="10%",style["-webkit-transition"]=style.transition="left "+_Constants2.default.ANIMATIONS.OPEN_DURATION+"s ease-in-out",this.window.runCodeFromPlugin=function(code){eval(code)}}return _createClass(WebView,[{key:"openUrl",value:function(e){this.iFrame.src=e}},{key:"setFrame",value:function(e){var n=this.iFrame.style;n.left=e.left,n.right=e.right,n.top=e.top,n.bottom=e.bottom,n.width=e.width,n.height=e.height}},{key:"_clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"hide",value:function(e){var n=this;this._clearTimer();var t=this.iFrame.style;t.left="-50%",this.timer=setTimeout((function(){t.visibility="hidden",n.timer=null}),1e3*_Constants2.default.ANIMATIONS.OPEN_DURATION)}},{key:"show",value:function(e){this._clearTimer();var n=this.iFrame.style;n.visibility="visible",n.left="0"}},{key:"evaluateJavaScript",value:function(e){this.window.postMessage({eval_code:e},_Constants2.default.GENERAL_CONSTANTS.REMOTE_URL)}}]),WebView}();exports.default=WebView}]).default}));